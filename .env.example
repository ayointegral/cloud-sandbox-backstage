# =============================================================================
# Cloud Sandbox Backstage - Environment Configuration
# =============================================================================
# Copy this file to .env and customize for your environment.
# All values with defaults can be left empty to use the default.
#
# IMPORTANT: Never commit the .env file to version control!
# =============================================================================

# =============================================================================
# DATABASE - PostgreSQL
# =============================================================================
# PostgreSQL is used for persistent storage of catalog entities, auth tokens,
# and plugin data. Required for production deployments.
#
# For local development with Docker Compose, use the default values.
# For production, use a managed database service (RDS, Cloud SQL, etc.)

# Hostname of the PostgreSQL server
# Default: postgres (Docker Compose service name)
POSTGRES_HOST=postgres

# PostgreSQL port number
# Default: 5432
POSTGRES_PORT=5432

# Database username for Backstage
# Default: backstage
POSTGRES_USER=backstage

# Database password for Backstage
# REQUIRED: Change this in production!
# Example: Use a randomly generated password like `openssl rand -base64 32`
POSTGRES_PASSWORD=backstage

# Database name
# Default: backstage
POSTGRES_DB=backstage

# =============================================================================
# CACHE - Redis
# =============================================================================
# Redis provides caching for improved performance. Used for catalog queries,
# auth sessions, and other frequently accessed data.

# Hostname of the Redis server
# Default: redis (Docker Compose service name)
REDIS_HOST=redis

# Redis port number
# Default: 6379
REDIS_PORT=6379

# Redis password (optional for development, recommended for production)
# REDIS_PASSWORD=

# =============================================================================
# MESSAGE QUEUE - RabbitMQ (Optional)
# =============================================================================
# RabbitMQ provides event-driven messaging between components.
# Currently reserved for future use.

# Hostname of the RabbitMQ server
# Default: rabbitmq (Docker Compose service name)
RABBITMQ_HOST=rabbitmq

# RabbitMQ AMQP port
# Default: 5672
RABBITMQ_PORT=5672

# RabbitMQ username
# Default: backstage
RABBITMQ_USER=backstage

# RabbitMQ password
# REQUIRED: Change this in production!
RABBITMQ_PASSWORD=backstage

# =============================================================================
# OBJECT STORAGE - MinIO (S3-Compatible)
# =============================================================================
# MinIO provides S3-compatible storage for TechDocs static files and
# branding assets (logos). In production, you can use AWS S3, GCS, or
# Azure Blob Storage instead.

# Hostname of the MinIO server
# Default: minio (Docker Compose service name)
MINIO_HOST=minio

# MinIO API port
# Default: 9000
MINIO_PORT=9000

# MinIO access key (username)
# Default: backstage
MINIO_ACCESS_KEY=backstage

# MinIO secret key (password)
# REQUIRED: Change this in production!
# Minimum 8 characters for MinIO
MINIO_SECRET_KEY=backstage123

# MinIO endpoint URL (used by branding plugin)
# Leave empty to use http://${MINIO_HOST}:${MINIO_PORT}
# MINIO_ENDPOINT=

# =============================================================================
# TECHDOCS STORAGE
# =============================================================================
# Configuration for TechDocs static file storage.

# S3 bucket name for TechDocs
# Default: techdocs
TECHDOCS_BUCKET=techdocs

# =============================================================================
# BRANDING SETTINGS
# =============================================================================
# Configuration for the custom branding plugin.

# S3 bucket name for branding assets (logos, etc.)
# Default: backstage-assets
BRANDING_BUCKET=backstage-assets

# Initial admin user for branding settings
# Format: username or user:default/username
# This user will be granted admin access on first startup
# Example: johndoe or user:default/johndoe
BRANDING_INITIAL_ADMIN=

# Fallback admin users (comma-separated)
# Used if database has no admins configured
# Example: johndoe,janesmith
BRANDING_ADMIN_USERS=

# =============================================================================
# GITHUB INTEGRATION
# =============================================================================
# GitHub integration enables repository access, organization sync, and
# scaffolder actions for creating repositories.

# GitHub Personal Access Token
# REQUIRED for GitHub integration
# Generate at: https://github.com/settings/tokens
#
# Required scopes:
# - repo          : Full control of private repositories
# - workflow      : Update GitHub Action workflows
# - read:org      : Read org and team membership
# - read:user     : Read user profile data
# - user:email    : Access user email addresses
GITHUB_TOKEN=

# GitHub Organization for team synchronization
# The OAuth App must belong to this org, or the token must have access
# Example: my-company
GITHUB_ORG=

# =============================================================================
# AUTHENTICATION - GitHub OAuth
# =============================================================================
# GitHub OAuth enables user authentication via GitHub accounts.
# Users are identified by their GitHub username.

# GitHub OAuth App Client ID
# Create at: https://github.com/settings/developers
# Required for GitHub authentication
GITHUB_CLIENT_ID=

# GitHub OAuth App Client Secret
# REQUIRED: Keep this secret!
GITHUB_CLIENT_SECRET=

# =============================================================================
# AUTHENTICATION - Microsoft/Azure AD (Optional)
# =============================================================================
# Microsoft OAuth enables authentication via Azure AD accounts.
# Useful for enterprise environments with Microsoft 365.

# Azure AD Application (client) ID
# Register at: https://portal.azure.com/#blade/Microsoft_AAD_RegisteredApps
AUTH_MICROSOFT_CLIENT_ID=

# Azure AD Application secret
AUTH_MICROSOFT_CLIENT_SECRET=

# Azure AD Tenant ID
# Use 'common' for multi-tenant, or your tenant ID for single-tenant
AUTH_MICROSOFT_TENANT_ID=

# =============================================================================
# AUTHENTICATION - Session Security
# =============================================================================

# Session secret for signing cookies
# REQUIRED for production!
# Generate with: openssl rand -base64 32
AUTH_SESSION_SECRET=

# =============================================================================
# AUTHENTICATION - Guest Access
# =============================================================================

# Enable guest (unauthenticated) access
# Default: false (disabled in production)
# Set to true only for demo/development environments
# WARNING: Enables unauthenticated access to the portal
GUEST_AUTH_ENABLED=false

# =============================================================================
# CORS CONFIGURATION
# =============================================================================

# Allowed CORS origin for API requests
# Default: http://localhost
# Set to your frontend domain in production
# Example: https://backstage.example.com
CORS_ORIGIN=http://localhost

# =============================================================================
# APPLICATION SETTINGS
# =============================================================================

# Node.js environment
# Options: development, production
# Default: production
NODE_ENV=production

# =============================================================================
# ENTERPRISE PLUGINS (Optional)
# =============================================================================
# These plugins require additional configuration and may require
# licenses. Uncomment and configure as needed.

# -----------------------------------------------------------------------------
# ArgoCD - GitOps Continuous Delivery
# -----------------------------------------------------------------------------
# Plugin: @roadiehq/backstage-plugin-argo-cd (frontend)
#         @roadiehq/scaffolder-backend-argocd (backend)

# ArgoCD server URL
# Example: https://argocd.example.com
# ARGOCD_BASE_URL=

# ArgoCD admin username
# ARGOCD_USERNAME=admin

# ArgoCD admin password
# ARGOCD_PASSWORD=

# -----------------------------------------------------------------------------
# Grafana - Monitoring Dashboards and Alerts
# -----------------------------------------------------------------------------
# Plugin: @k-phoen/backstage-plugin-grafana (frontend)

# Grafana server domain (without protocol)
# Example: grafana.example.com
# GRAFANA_DOMAIN=

# Grafana API token
# Generate at: Grafana > Configuration > API Keys
# GRAFANA_TOKEN=

# -----------------------------------------------------------------------------
# SonarQube - Code Quality Analysis
# -----------------------------------------------------------------------------
# Plugin: @backstage/plugin-sonarqube (frontend)
#         @backstage/plugin-sonarqube-backend (backend)

# SonarQube server URL
# Example: https://sonarqube.example.com
# SONARQUBE_BASE_URL=

# SonarQube API token
# Generate at: SonarQube > My Account > Security
# SONARQUBE_API_KEY=

# -----------------------------------------------------------------------------
# AWX / Ansible Tower - Automation Platform
# -----------------------------------------------------------------------------
# Plugin: Uses HTTP Request scaffolder action via proxy

# AWX server URL
# Example: https://awx.example.com
# AWX_BASE_URL=

# AWX API token
# Generate at: AWX > Users > Tokens
# AWX_TOKEN=

# -----------------------------------------------------------------------------
# Cost Insights - Cloud Cost Management
# -----------------------------------------------------------------------------
# Plugin: @backstage/plugin-cost-insights (frontend)

# Average engineer cost per year (in cents)
# Used for cost comparisons
# Default: 200000 ($2000)
# COST_INSIGHTS_ENGINEER_COST=200000

# -----------------------------------------------------------------------------
# Elasticsearch - Search Engine (Optional)
# -----------------------------------------------------------------------------
# For large catalogs, Elasticsearch provides better search performance.
# Plugin: @backstage/plugin-search-backend-module-elasticsearch

# Elasticsearch node URL
# Example: http://elasticsearch:9200
# ELASTICSEARCH_NODE=

# Elasticsearch API key (preferred auth method)
# ELASTICSEARCH_API_KEY=

# Alternative: Elasticsearch username/password
# ELASTICSEARCH_USERNAME=elastic
# ELASTICSEARCH_PASSWORD=
