# Backstage Environment Configuration
# Copy this file to .env and customize for your environment

# =============================================================================
# PostgreSQL
# =============================================================================
POSTGRES_HOST=postgres
POSTGRES_PORT=5432
POSTGRES_USER=backstage
POSTGRES_PASSWORD=backstage

# =============================================================================
# Redis
# =============================================================================
REDIS_HOST=redis
REDIS_PORT=6379

# =============================================================================
# RabbitMQ
# =============================================================================
RABBITMQ_HOST=rabbitmq
RABBITMQ_PORT=5672
RABBITMQ_USER=backstage
RABBITMQ_PASSWORD=backstage

# =============================================================================
# MinIO (S3-compatible storage)
# =============================================================================
MINIO_HOST=minio
MINIO_PORT=9000
MINIO_ACCESS_KEY=backstage
MINIO_SECRET_KEY=backstage123
TECHDOCS_BUCKET=techdocs

# =============================================================================
# Branding Settings
# =============================================================================
# Initial admin user for branding settings (only used on first startup)
# After first run, admins are managed via the UI at /admin/branding
BRANDING_INITIAL_ADMIN=

# Fallback: comma-separated usernames (used if database has no admins)
BRANDING_ADMIN_USERS=

# =============================================================================
# GitHub Integration
# =============================================================================
# Generate a personal access token at https://github.com/settings/tokens
# Required scopes: repo, workflow (for scaffolder to create repos)
# For org sync, also add: read:org, read:user, user:email
GITHUB_TOKEN=

# GitHub Organization to sync teams and members from
# The OAuth App must belong to this org, or the token must have access to it
GITHUB_ORG=

# =============================================================================
# Authentication - GitHub OAuth
# =============================================================================
# Create an OAuth App at https://github.com/settings/developers
# Authorization callback URL: http://localhost:7007/api/auth/github/handler/frame
# 
# IMPORTANT: Users are authenticated via GitHub OAuth. Their Backstage identity
# is derived from their GitHub username. Group membership for permissions is
# determined by:
# 1. Manual assignment in catalog/users.yaml, OR
# 2. Automatic sync from GitHub org teams (if configured)
#
# See catalog/users.yaml for available groups (admins, editors, viewers)
GITHUB_CLIENT_ID=
GITHUB_CLIENT_SECRET=

# =============================================================================
# Authentication - Microsoft / Azure DevOps
# =============================================================================
# Register an app at https://portal.azure.com/#blade/Microsoft_AAD_RegisteredApps
# Redirect URI: http://localhost:7007/api/auth/microsoft/handler/frame
AUTH_MICROSOFT_CLIENT_ID=
AUTH_MICROSOFT_CLIENT_SECRET=
AUTH_MICROSOFT_TENANT_ID=

# =============================================================================
# Application Settings
# =============================================================================
NODE_ENV=production

# =============================================================================
# Session Secret (required for authentication)
# =============================================================================
# Generate a random string for session signing
# Example: openssl rand -base64 32
AUTH_SESSION_SECRET=

# =============================================================================
# PLACEHOLDER: Enterprise Plugin Configuration
# =============================================================================
# Uncomment and configure these when ready to enable the corresponding plugins
# =============================================================================

# -----------------------------------------------------------------------------
# ArgoCD - GitOps Continuous Delivery
# -----------------------------------------------------------------------------
# Requires: @roadiehq/backstage-plugin-argo-cd (frontend)
#           @roadiehq/scaffolder-backend-argocd (backend)
# ARGOCD_BASE_URL=https://argocd.example.com
# ARGOCD_USERNAME=admin
# ARGOCD_PASSWORD=

# -----------------------------------------------------------------------------
# Grafana - Monitoring Dashboards and Alerts
# -----------------------------------------------------------------------------
# Requires: @k-phoen/backstage-plugin-grafana (frontend)
# GRAFANA_DOMAIN=https://grafana.example.com
# GRAFANA_TOKEN=

# -----------------------------------------------------------------------------
# SonarQube - Code Quality Analysis
# -----------------------------------------------------------------------------
# Requires: @backstage/plugin-sonarqube (frontend)
#           @backstage/plugin-sonarqube-backend (backend)
# SONARQUBE_BASE_URL=https://sonarqube.example.com
# SONARQUBE_API_KEY=

# -----------------------------------------------------------------------------
# AWX / Ansible Tower - Automation Platform
# -----------------------------------------------------------------------------
# Uses HTTP Request scaffolder action via proxy
# Requires: @roadiehq/scaffolder-backend-module-http-request (backend)
# AWX_BASE_URL=https://awx.example.com
# AWX_TOKEN=

# -----------------------------------------------------------------------------
# Cost Insights - Cloud Cost Management
# -----------------------------------------------------------------------------
# Requires: @backstage/plugin-cost-insights (frontend)
# Needs custom cost client implementation or mock data
# COST_INSIGHTS_ENGINEER_COST=200000

# -----------------------------------------------------------------------------
# Elasticsearch - Search Engine (Optional)
# -----------------------------------------------------------------------------
# For production deployments with large catalogs
# Requires: @backstage/plugin-search-backend-module-elasticsearch (backend)
# ELASTICSEARCH_NODE=http://elasticsearch:9200
# ELASTICSEARCH_API_KEY=
# Or use username/password:
# ELASTICSEARCH_USERNAME=elastic
# ELASTICSEARCH_PASSWORD=
