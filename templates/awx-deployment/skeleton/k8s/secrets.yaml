apiVersion: v1
kind: Secret
metadata:
  name: awx-${{ values.name }}-admin-password
  namespace: ${{ values.namespace }}
  labels:
    environment: ${{ values.environment }}
    managed-by: backstage
type: Opaque
data:
  password: YWRtaW4xMjM= # admin123 - CHANGE THIS IN PRODUCTION!
---
apiVersion: v1
kind: Secret
metadata:
  name: awx-${{ values.name }}-postgres-configuration
  namespace: ${{ values.namespace }}
  labels:
    environment: ${{ values.environment }}
    managed-by: backstage
type: Opaque
stringData:
  host: awx-${{ values.name }}-postgres-13
  port: "5432"
  database: awx
  username: awx
  password: awxpass123 # CHANGE THIS IN PRODUCTION!
  sslmode: prefer
  type: managed
{%- if values.ldap_enabled %}
---
apiVersion: v1
kind: Secret
metadata:
  name: awx-${{ values.name }}-ldap-cacert
  namespace: ${{ values.namespace }}
  labels:
    environment: ${{ values.environment }}
    managed-by: backstage
type: Opaque
data:
  ldap-cacert.crt: LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0t... # Add your LDAP CA certificate here
{%- endif %}
{%- if values.ssl_enabled and values.ingress_enabled %}
---
apiVersion: v1
kind: Secret
metadata:
  name: awx-${{ values.name }}-tls
  namespace: ${{ values.namespace }}
  labels:
    environment: ${{ values.environment }}
    managed-by: backstage
  annotations:
    cert-manager.io/cluster-issuer: letsencrypt-prod
type: kubernetes.io/tls
data:
  tls.crt: # Will be populated by cert-manager
  tls.key: # Will be populated by cert-manager
{%- endif %}
